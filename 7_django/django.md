# Django

#### Framework 란?

다양한 개발에 사용되는 코드 부분들을 재사용할 수 있게 좋은 구조의 코드로 만들어 두고, 그러한 코드들을 모아 놓은 것, 즉 서비스 개발에 필요한 기능들을 미리 구현해서 모아 놓은 것이다.

Framework를 잘 사용하기만 한다면 서비스 개발에 있어서 하나부터 열까지 개발할 필요가 없게 되어, 본질적으로 집중할 수 있고, 시간과 노력을 많이 아낄 수 있다.

클라이언트 측 Framework(Bootstrap)는 개발하는 속도를 올려줄 수 있지만 모든 코드를 직접 작성할 수도 있다. ( 그게 더 나을 때도 있을 것이다.) 하지만 서버 측 Framework(Django)을 직접 작성하는 것은 매우 비효율적일 뿐만아니라 완성도 측면에서도 많이 떨어질 수 있기 때문이다.



#### Django 란?

Python으로 작성된, 서버를 구현하는 웹 Framework이다. 

Python이라는 언어의 강력함과 거대한 커뮤니티가 만나 수많은 유용한 기능들을 제공하고, Toss, 당근마켓, 요기요 등 거대 기업들이 현재 Django를 활용하고 있음



#### 클라이언트와 서버 란?

- 오늘날 우리가 사용하는 대부분의 웹 서비스는 클라이언트-서버 구조를 기반으로 동작
  - 클라이언트

    - 웹 사용자의 인터넷에 연결된 장치
    - Chrome 또는 Firefox와 같은 웹 브라우저
    - 서비스를 요청하는 주체

  - 서버

    - 웹 페이지, 사이트 또는 앱을 저장하는 컴퓨터

    - 클라이언트가 웹 페이지에 접근하려고 할 때 서버에서 클라이언트 컴퓨터로 웹페이지 데이터를 응답해 사용자의 웹 브라우저에 표시됨

    - 요청에 대해 서비스를 응답하는 주체

- Google 홈페이지에 접속한다는 것은 밑의 과정이 이루어진다는 것을 의미한다.
  1. 인터넷으로 연결된 Google 서버에 Google 홈페이지.html 파일을 달라고 요청하고,
  2. Google 서버는 우리의 요청을 받고 인터넷을 통해 html 파일을 전송하고,
  3. 컴퓨터의 브라우저는 받은 html 파일을 우리가 볼 수 있도록 해석하여 표현한다.



#### 웹 브라우저 란?

- 웹에서 페이지를 찾아 보여주고, 사용자가 하이퍼링크를 통해 다른 페이지로 이동할 수 있도록 하는 프로그램
- 웹페이지 파일을 우리가 보는 화면으로 바꿔주는(렌더링, rendering) 프로그램
- HTML / CSS / JS 로 구성된 HTML 문서파일을 우리가 보는 예쁜 화면으로 구성해주는 프로그램



#### 웹 페이지 란?

- 우리가 보는 화면 각각 한 장 한 장이 웹 페이지
- 정적 웹 페이지와 동적 웹 페이지가 있음
- 정적 웹 페이지(Static Web page)
  - 있는 그대로를 제공하는 것으로, 한 번 작성된 HTML 파일의 내용이 변하지 않고 모든 사용자에게 동일한 모습으로 전달되는 것
  - 같은 상황에서 모든 사용자에게 동일한 정보를 표시
- 동적 웹 페이지(Dynamic Web page)
  - 사용자의 요청에 따라 웹 페이지에 추가적인 수정이 되어 클라이언트에게 전달되는 웹 페이지
    - 개별 사용자에 맞게 정보를 효율적으로 전달할 수 있게 해주고 사용자 경험을 훨씬 향상시킬 수 있음.
    - 예를 들어, 고객선호도와 이전 구매 습관을 기반으로 한 제품 제안, 재미있는 컨텐츠에 대한 액세스를 강조하고 공유할 수 있음.
  - 서버에서 동작하고 있는 프로그램이 웹 페이지를 변경해줌.
  - Django 가 이런 동작 웹 페이지를 쉽게 만들 수 있게 도와줌.
  - 다양한 서버 사이드 프로그래밍 언어(python, java, c++) 를 사용하여 파일을 처리하고 데이터베이스와의 상호작용이 이루어짐



#### URL의 구조

URI : http://www.naver.com:80/~~~

- 누구에게 : naver에게
- 무엇을 : ~~~을 주문한다.
- 기본은 / (root페이지) 를 주문한다.



### 브라우저에 웹 주소를 입력할 때 어떤 일이 일어날까?



1. **브라우저는 DNS 서버로 가서 웹사이트가 있는 서버의 진짜 주소를 찾습니다.**

   

2. **브라우저는 서버에게 웹사이트의 사본을 클라이언트에게 보내달라는 HTTP 요청 메세지를 서버로 전송합니다.**  

   *(이 때 메세지, 클라이언트와 서버 사이에 전송된 모든 데이터는 TCP/IP 연결을 통해 전송됩니다.)*

   

3. **이 메세지를 받은 서버는 클라이언트의 요청을 승인하고, "200 OK" 메세지를 클라이언트에게 전송합니다.** 

   *(이 때 "200 OK"는 "물론이죠, 당신은 웹 사이트를 볼 수 있습니다. 보내드릴게요." 라는 의미입니다. )*

   

4. **그 다음 서버는 웹사이트의 파일들을 데이터 패킷이라 불리는 작은 일련의 덩어리들로 브라우저에 전송하기 시작합니다.**

   

5. **브라우저는 이 작은 덩어리들을 완전한 웹 사이트로 조립하여 보여줍니다.**



#### DNS (Domain Name System Servers)

실제 웹 주소는 63.245.217.105 와 같은 숫자 덩어리이기 때문에 쉽게 기억할 수 없습니다. 

DNS 는 브라우저에 입력하는 웹 주소(google.com)를 실제 (IP) 주소와 맞춰주는 특별한 서버입니다.



### **가상환경 생성,실행 및 Django를 통해 서버 생성**

가상환경을 생성할 폴더로 이동 후 깃 배쉬 실행

가상환경(venv)은 프로젝트별로 활용하는 툴의 버전, 종류가 다르기 때문에 활용툴을 컨트롤하기 위하여 사용한다.



1. **server-venv라는 가상환경이름으로 가상환경구성폴더 생성, 이 때 venv는 파이썬의 가상환경 모듈이다.**

   ~~~bash
    $ python -m venv server-venv
   ~~~

   

2. **가상환경 실행**

   ~~~bash
   $ source server-venv/Scripts/activate
   ~~~

   

3. **가상환경 종료**

   ~~~bash
   $ deactivate
   ~~~

   

4. **장고 설치**

   ~~~bash
   $ pip install django==3.2.13
   ~~~

   `버전 명시는 == , 장고의 가장 안정적인 버전이 3.2.13(LTS)버전`

   `LTS (Long Term Support) : 장기 지원 버전`



5. **프로젝트 생성**

   ~~~bash
   $ django-admin startproject [프로젝트이름] [시작경로]
   ~~~

   `시작경로에 현재폴더를 지정하고 싶으면 . 을 입력하면 된다.`



6. **현재 폴더를 vs code로 오픈하여 확인**

   ~~~bash
   $ code .
   ~~~

   

7. **장고 설치 시 생성된 manage.py를 실행하여 내 컴퓨터에만 존재하는 서버 실행**

   ~~~bash
   $ python manage.py runserver
   # 실행하기 전에 ls를 입력하여 manage.py 파일이 현재 경로에 존재하는지 확인
   ~~~

   

8. **브라우저에 localhost:8000 입력**

   장고에서 웹페이지를 성공적으로 생성했다는 페이지 출력



9. **어플 생성**

   ~~~bash
   $ python manage.py startapp articles
   ~~~

   

10. **어플 등록**

    프로젝트폴더 안에 settings.py 안에 INSTALLED_APPS 라는 이름의 리스트 안에 최상단에 어플 폴더를 넣는다. ('articles' ,<-- 이렇게 넣는다.)

    

11. 요청과 응답 설계

    1. 주문서 정의 (urls.py)
    2. 로직 구현 (views.py)
    3. HTML 페이지 구성 (~~~.html)

    

12. **URL 선언**

    urls.py 파일의 ulrpatterns 라는 리스트에 path('index/', views.index), 를 추가한다.

    ~~~python
    urlpatterns = [
        path('admin/', admin.site.urls),
        path('index/', views.index), 
    ]
    # views.py 내의 index()함수를 실행하고, 경로는 index/로 한다.
    ~~~

    

    

13. **views.py 파일에서 어떤 내용을 불러올 것인지에 대한 정보를 삽입**

    ~~~python
    # views.py
    
    from django.shortcuts import render
    
    def index(request):
        number = 1
        context = {
            "num": number,
            "num2": number,
        }
        # 
        
        return render(request, "index.html", context)
    ~~~

    

14. **앱 내부에 templates 폴더 생성 (templates 이름은 변경하지 않는다.)**

    templates 폴더는 웹사이트를 구성하는 HTML 문서들이 저장되는 공간이다.

    12번에서 index라는 함수가 index.html 문서를 반환하게 작성했으므로 templates 폴더에 index.html을 작성한다.

    ~~~html
    <!-- html에서 파이썬 for문을 구현하는 법 (Django 한정)-->
    <body>
        {% for number in numbers %}
        <p>{{ number }}</p>
        {% endfor %} <!-- 기존 파이썬과는 조금 다르게 for문 종료를 명시하는 구문을 작성해야함-->
    </body>
    ~~~

    



